---
  - name: this play is for start/stop/terminate instances based upon tags
    gather_facts: false
    hosts:  localhost
    connection: local
    tasks:
      - name: this task is to collect ec2 instance info based upon EC2 tags
        amazon.aws.ec2_metadata_facts:

        # register: ec2_instances_info
      
      - name: print ec2 details
        debug:
          msg: 
            - "This instance is a t1.micro"
            - "{{hostvars[ansible_ec2_instance_id]}}"
            - "Service hostname is: '{{ hostvars[inventory_hostname].tags.Name }}.{{ delegated_dns_domain }}'"
        when: ansible_ec2_instance_type == "t2.small"


    
