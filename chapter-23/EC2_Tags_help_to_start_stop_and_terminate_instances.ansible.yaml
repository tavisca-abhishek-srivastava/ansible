---
  - name: this play is for start/stop/terminate instances based upon tags
    gather_facts: false
    hosts:  localhost
    connection: local
    tasks:
      - name: this task is to collect ec2 instance info based upon EC2 tags
        amazon.aws.ec2_instance_info:
          filters:
            "tag:Environment": "poc"
          region: us-east-1
        register: ec2_node_info
      
      - name: print info
        debug:
          msg:
            - "{{item['private_ip_address']}}"
            # - "{{((ec2_node_info)['instances'])[1].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[2].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[3].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[4].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[5].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[6].private_ip_address}}"
            # - "{{((ec2_node_info)['instances'])[7].private_ip_address}}"
        loop: "{{(ec2_node_info)['instances']}}"   # https://www.freekb.net/Article?id=586 ansible looping
        loop_control:   #supress log using https://www.freekb.net/Article?id=2989 loop control   
          label: "{{ item['private_ip_address'] }}"


    
